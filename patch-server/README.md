# ğŸš€ Android çƒ­æ›´æ–°è¡¥ä¸ç®¡ç†ç³»ç»?

å®Œæ•´çš„è¡¥ä¸ç®¡ç†æœåŠ¡ç«¯ï¼Œæ”¯æŒè¡¥ä¸ä¸Šä¼ ã€ç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒã€ç»Ÿè®¡åˆ†æç­‰åŠŸèƒ½ã€‚æä¾›ç°ä»£åŒ–çš?Web ç®¡ç†åå°ï¼Œè®©è¡¥ä¸ç®¡ç†å˜å¾—ç®€å•é«˜æ•ˆã€?

## âœ?æ ¸å¿ƒåŠŸèƒ½

### ğŸ“¦ è¡¥ä¸ç®¡ç†
- **è¡¥ä¸ä¸Šä¼ ** - æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œè‡ªåŠ?MD5 æ ¡éªŒ
- **è‡ªåŠ¨ç”Ÿæˆ** - é›†æˆ patch-cliï¼Œä¸€é”®ç”Ÿæˆå·®åˆ†è¡¥ä¸?
- **ç‰ˆæœ¬æ§åˆ¶** - å®Œæ•´çš„ç‰ˆæœ¬ç®¡ç†å’Œå›æ»šæœºåˆ¶
- **çŠ¶æ€ç®¡ç?* - æµ‹è¯•ä¸?å·²å‘å¸?å·²åœç”¨ä¸‰ç§çŠ¶æ€?
- **æ‰¹é‡æ“ä½œ** - æ‰¹é‡å¯ç”¨ã€åœç”¨ã€åˆ é™¤è¡¥ä¸?

### ğŸ¯ ç°åº¦å‘å¸ƒ
- **ç™¾åˆ†æ¯”æ§åˆ?* - æ”¯æŒ 0-100% ç°åº¦å‘å¸ƒ
- **è®¾å¤‡ ID å“ˆå¸Œ** - åŸºäºè®¾å¤‡ ID çš„ç¨³å®šç°åº¦ç­–ç•?
- **å¼ºåˆ¶æ›´æ–°** - æ”¯æŒå¼ºåˆ¶æ›´æ–°æ ‡è®°
- **å®æ—¶è°ƒæ•´** - éšæ—¶è°ƒæ•´ç°åº¦æ¯”ä¾‹

### ğŸ” å®‰å…¨åŠŸèƒ½
- **è¡¥ä¸ç­¾å** - æ”¯æŒ JKS/BKS ç­¾åéªŒè¯
- **è¡¥ä¸åŠ å¯†** - AES-256 åŠ å¯†ä¿æŠ¤
- **JWT è®¤è¯** - å®‰å…¨çš„èº«ä»½éªŒè¯æœºåˆ?
- **æƒé™æ§åˆ¶** - ç®¡ç†å‘?æ™®é€šç”¨æˆ·è§’è‰²ç®¡ç?
- **é¢‘ç‡é™åˆ¶** - API è®¿é—®é¢‘ç‡é™åˆ¶

### ğŸ“Š ç»Ÿè®¡åˆ†æ
- **ä»ªè¡¨æ?* - åº”ç”¨æ€»æ•°ã€è¡¥ä¸æ€»æ•°ã€ä¸‹è½½é‡ã€æˆåŠŸç‡
- **ä¸‹è½½è¶‹åŠ¿** - 7/30/90 å¤©è¶‹åŠ¿å›¾è¡?
- **ç‰ˆæœ¬åˆ†å¸ƒ** - é¥¼å›¾å±•ç¤ºç‰ˆæœ¬å æ¯”
- **è®¾å¤‡åˆ†å¸ƒ** - æŸ±çŠ¶å›¾å±•ç¤ºè®¾å¤‡å‹å·åˆ†å¸?
- **çƒ­é—¨åº”ç”¨** - Top 5 åº”ç”¨æ’è¡Œ
- **æœ€è¿‘æ´»åŠ?* - å®æ—¶æ“ä½œæ—¥å¿—

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- **å¤šç”¨æˆ·æ”¯æŒ?* - æ”¯æŒå¤šä¸ªå¼€å‘è€…è´¦å?
- **æƒé™åˆ†çº§** - ç®¡ç†å‘?æ™®é€šç”¨æˆ·æƒé™?
- **åº”ç”¨å®¡æ ¸** - ç®¡ç†å‘˜å®¡æ ¸åº”ç”¨åˆ›å»ºï¼ˆå¯é€‰ï¼‰
- **ç”¨æˆ·å°ç¦** - å°ç¦/è§£å°ç”¨æˆ·åŠå…¶åº”ç”¨

### ğŸ”” é€šçŸ¥ç³»ç»Ÿ
- **ç«™å†…é€šçŸ¥** - åº”ç”¨å®¡æ ¸ã€è¡¥ä¸æ›´æ–°é€šçŸ¥
- **å®æ—¶æ›´æ–°** - æ¯?30 ç§’è‡ªåŠ¨åˆ·æ–?
- **æ¶ˆæ¯ç®¡ç†** - æ ‡è®°å·²è¯»ã€åˆ é™¤ã€æ¸…ç©?

### ğŸ” å…¨å±€æœç´¢
- **å¿«é€Ÿæœç´?* - æœç´¢åº”ç”¨ã€è¡¥ä¸ã€ç”¨æˆ?
- **å…³é”®è¯é«˜äº?* - æœç´¢ç»“æœé«˜äº®æ˜¾ç¤º
- **æƒé™è¿‡æ»¤** - æ ¹æ®ç”¨æˆ·æƒé™è¿‡æ»¤ç»“æœ

### âš™ï¸ ç³»ç»Ÿç®¡ç†
- **å®šæ—¶ä»»åŠ¡** - è‡ªåŠ¨å¤‡ä»½ã€æ—¥å¿—æ¸…ç†ã€è®°å½•æ¸…ç?
- **æ•°æ®å¤‡ä»½** - ä¸€é”®å¤‡ä»½æ•°æ®åº“å’Œæ–‡ä»?
- **å¤‡ä»½æ¢å¤** - å¿«é€Ÿæ¢å¤å†å²å¤‡ä»?
- **æ“ä½œæ—¥å¿—** - å®Œæ•´çš„æ“ä½œå®¡è®¡æ—¥å¿?

## ğŸ› ï¸?æŠ€æœ¯æ ˆ

### åç«¯
- **Node.js + Express** - RESTful API æœåŠ¡
- **SQLite** - è½»é‡çº§æ•°æ®åº“ï¼ˆå¯åˆ‡æ¢ MySQLï¼?
- **JWT** - èº«ä»½è®¤è¯
- **Multer** - æ–‡ä»¶ä¸Šä¼ å¤„ç†

### å‰ç«¯
- **Vue 3** - æ¸è¿›å¼?JavaScript æ¡†æ¶
- **Element Plus** - ä¼ä¸šçº?UI ç»„ä»¶åº?
- **ECharts** - æ•°æ®å¯è§†åŒ–å›¾è¡?
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…?

## ğŸ“¦ å¿«é€Ÿå¼€å§?

### ç¯å¢ƒè¦æ±‚

- **Node.js** 16+
- **npm** æˆ?**yarn**

### æœ¬åœ°å¼€å?

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/706412584/Android_hotupdate.git
cd Android_hotupdate/patch-server
```

#### 2. å¯åŠ¨åç«¯

```bash
cd backend

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“ã€JWT å¯†é’¥ç­?

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

åç«¯æœåŠ¡è¿è¡Œåœ?`http://localhost:3000`

#### 3. å¯åŠ¨å‰ç«¯

```bash
cd ../frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯æœåŠ¡è¿è¡Œåœ?`http://localhost:5173`

#### 4. è®¿é—®ç®¡ç†åå°

æ‰“å¼€æµè§ˆå™¨è®¿é—?`http://localhost:5173`

**é»˜è®¤ç®¡ç†å‘˜è´¦å?*ï¼?
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

### ç”Ÿäº§éƒ¨ç½²

#### æ–¹å¼ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# æ„å»ºå¹¶å¯åŠ?
docker-compose up -d

# è®¿é—®
# ç®¡ç†åå°: http://localhost:8080
# API: http://localhost:3000
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

##### åç«¯éƒ¨ç½²

```bash
cd backend

# å®‰è£…ä¾èµ–
npm install --production

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .envï¼Œè®¾ç½®ç”Ÿäº§ç¯å¢ƒé…ç½?

# å¯åŠ¨æœåŠ¡ï¼ˆä½¿ç”?PM2ï¼?
npm install -g pm2
pm2 start server.js --name patch-server

# æŸ¥çœ‹æ—¥å¿—
pm2 logs patch-server
```

##### å‰ç«¯éƒ¨ç½²

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# éƒ¨ç½² dist ç›®å½•åˆ?Web æœåŠ¡å™¨ï¼ˆNginx/Apacheï¼?
```

##### Nginx é…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;

    # å‰ç«¯é™æ€æ–‡ä»?
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯ API ä»£ç†
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # è¡¥ä¸ä¸‹è½½
    location /downloads {
        proxy_pass http://localhost:3000;
    }
}
```

#### æ–¹å¼ä¸‰ï¼šäº‘å¹³å°éƒ¨ç½?

##### Vercelï¼ˆå‰ç«¯ï¼‰

```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²å‰ç«¯
cd frontend
vercel
```

##### Railway/Renderï¼ˆåç«¯ï¼‰

1. è¿æ¥ GitHub ä»“åº“
2. é€‰æ‹© `patch-server/backend` ç›®å½•
3. è®¾ç½®ç¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `backend/.env` æ–‡ä»¶ï¼?

```env
# æœåŠ¡å™¨é…ç½?
PORT=3000
NODE_ENV=production

# æ•°æ®åº“é…ç½?
DB_TYPE=sqlite
DB_PATH=./database.db

# JWT é…ç½®
JWT_SECRET=your-secret-key-change-this
JWT_EXPIRES_IN=7d

# æ–‡ä»¶å­˜å‚¨
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=100

# CORS é…ç½®
CORS_ORIGIN=*

# patch-cli è·¯å¾„ï¼ˆå¯é€‰ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆè¡¥ä¸ï¼?
PATCH_CLI_JAR=/path/to/patch-cli-all.jar
```

### æ•°æ®åº“é…ç½?

#### SQLiteï¼ˆé»˜è®¤ï¼‰
```env
DB_TYPE=sqlite
DB_PATH=./database.db
```

#### MySQL
```env
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=password
DB_NAME=patch_server
```

## ğŸ“± å®¢æˆ·ç«¯é›†æˆ?

### æ£€æŸ¥æ›´æ–?

```http
GET /api/client/check-update?appId=your-app-id&version=1.0.0&deviceId=xxx

Response:
{
  "hasUpdate": true,
  "patch": {
    "version": "1.0.1",
    "downloadUrl": "http://your-domain.com/downloads/patch-xxx.zip",
    "md5": "abc123...",
    "size": 1024000,
    "description": "ä¿®å¤è¯´æ˜",
    "forceUpdate": false
  }
}
```

### ä¸‹è½½è¡¥ä¸

```http
GET /api/client/download/:patchId
```

### ä¸ŠæŠ¥ä¸‹è½½ç»“æœ

```http
POST /api/client/report
Content-Type: application/json

{
  "patchId": "xxx",
  "deviceId": "xxx",
  "success": true,
  "errorMessage": ""
}
```

## ğŸ“– API æ–‡æ¡£

### è®¤è¯æ¥å£

#### ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

#### æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "username": "user",
  "password": "password",
  "email": "user@example.com"
}
```

### åº”ç”¨ç®¡ç†

#### åˆ›å»ºåº”ç”¨
```http
POST /api/apps
Authorization: Bearer <token>
Content-Type: application/json

{
  "appName": "æˆ‘çš„åº”ç”¨",
  "packageName": "com.example.app",
  "description": "åº”ç”¨æè¿°"
}
```

#### è·å–åº”ç”¨åˆ—è¡¨
```http
GET /api/apps
Authorization: Bearer <token>
```

### è¡¥ä¸ç®¡ç†

#### ä¸Šä¼ è¡¥ä¸
```http
POST /api/patches/upload
Authorization: Bearer <token>
Content-Type: multipart/form-data

{
  "file": <patch.zip>,
  "appId": 1,
  "version": "1.0.1",
  "baseVersion": "1.0.0",
  "description": "ä¿®å¤è¯´æ˜"
}
```

#### è·å–è¡¥ä¸åˆ—è¡¨
```http
GET /api/patches?page=1&limit=10
Authorization: Bearer <token>
```

#### æ›´æ–°è¡¥ä¸çŠ¶æ€?
```http
PUT /api/patches/:id/status
Authorization: Bearer <token>
Content-Type: application/json

{
  "status": "active"  // active/inactive/testing
}
```

## ğŸ”’ å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **ä¿®æ”¹é»˜è®¤å¯†ç ** - é¦–æ¬¡ç™»å½•åç«‹å³ä¿®æ”?admin å¯†ç 
2. **è®¾ç½®å¼ºå¯†é’?* - ä¿®æ”¹ JWT_SECRET ä¸ºå¤æ‚éšæœºå­—ç¬¦ä¸²
3. **å¯ç”¨ HTTPS** - ä½¿ç”¨ SSL è¯ä¹¦åŠ å¯†ä¼ è¾“
4. **é…ç½® CORS** - é™åˆ¶å…è®¸çš„åŸŸå?
5. **å®šæœŸå¤‡ä»½** - å¯ç”¨è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½
6. **ç›‘æ§æ—¥å¿—** - å®šæœŸæŸ¥çœ‹æ“ä½œæ—¥å¿—

### æ–‡ä»¶å®‰å…¨

- è¡¥ä¸æ–‡ä»¶å­˜å‚¨åœ?`backend/uploads` ç›®å½•
- å»ºè®®é…ç½®æ–‡ä»¶è®¿é—®æƒé™
- å®šæœŸæ¸…ç†è¿‡æœŸè¡¥ä¸æ–‡ä»¶

## ğŸ“Š ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½?
- **CPU**: 1 æ ?
- **å†…å­˜**: 512MB
- **ç£ç›˜**: 10GB
- **é€‚ç”¨**: < 100 ç”¨æˆ·

### æ¨èé…ç½®
- **CPU**: 2 æ ?
- **å†…å­˜**: 2GB
- **ç£ç›˜**: 50GB
- **é€‚ç”¨**: 100-1000 ç”¨æˆ·

### é«˜æ€§èƒ½é…ç½®
- **CPU**: 4 æ ?
- **å†…å­˜**: 4GB+
- **ç£ç›˜**: 100GB+
- **é€‚ç”¨**: > 1000 ç”¨æˆ·

## ğŸ› æ•…éšœæ’æŸ¥

### åç«¯æ— æ³•å¯åŠ¨

1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`lsof -i :3000`
2. æ£€æŸ?Node.js ç‰ˆæœ¬ï¼š`node -v`ï¼ˆéœ€è¦?16+ï¼?
3. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½?
4. æŸ¥çœ‹æ—¥å¿—ï¼š`npm run dev`

### å‰ç«¯æ— æ³•è®¿é—®

1. æ£€æŸ¥å‰ç«¯æœåŠ¡æ˜¯å¦å¯åŠ?
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯?
3. æ£€æŸ?API ä»£ç†é…ç½®ï¼ˆvite.config.jsï¼?
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­?

### æ•°æ®åº“é”™è¯?

1. æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
3. é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼š`npm run init-db`

### æ–‡ä»¶ä¸Šä¼ å¤±è´¥

1. æ£€æŸ?uploads ç›®å½•æƒé™
2. æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆMAX_FILE_SIZEï¼?
3. æ£€æŸ¥ç£ç›˜ç©ºé—?

## ğŸ“ æŠ€æœ¯æ”¯æŒ?

- **GitHub Issues**: [æŠ¥å‘Šé—®é¢˜](https://github.com/706412584/Android_hotupdate/issues)
- **GitHub Discussions**: [è®¨è®ºåŒº](https://github.com/706412584/Android_hotupdate/discussions)
- **æ–‡æ¡£**: æŸ¥çœ‹ `docs/` ç›®å½•ä¸‹çš„è¯¦ç»†æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯?

MIT License

---

**å¼€å‘è€?*: Android çƒ­æ›´æ–°å›¢é˜? 
**ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–?*: 2026-01-19

