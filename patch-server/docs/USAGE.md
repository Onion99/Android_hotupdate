# 使用指南

本文档详细介绍补丁管理系统的各项功能使用方法?

## 目录

- [快速开始](#快速开?
- [应用管理](#应用管理)
- [补丁管理](#补丁管理)
- [灰度发布](#灰度发布)
- [统计分析](#统计分析)
- [用户管理](#用户管理)
- [系统设置](#系统设置)

## 快速开?

### 首次登录

1. 访问管理后台：`http://localhost:5173`
2. 使用默认账号登录?
   - 用户名：`admin`
   - 密码：`admin123`
3. **重要**：首次登录后请立即修改密?

### 修改密码

1. 点击右上角用户名
2. 选择"修改密码"
3. 输入旧密码和新密?
4. 点击"确认"

## 应用管理

### 创建应用

1. 点击左侧菜单"我的应用"
2. 点击"创建应用"按钮
3. 填写应用信息?
   - **应用名称**：显示名?
   - **包名**：Android 应用包名（如 com.example.app?
   - **描述**：应用说明（可选）
   - **图标**：应用图标（可选）
4. 点击"创建"

**注意**：如果管理员启用了应用审核，创建的应用需要等待审核通过?

### 查看应用列表

- **我的应用**：查看自己创建的应用
- **应用列表**（管理员）：查看所有用户的应用

### 应用筛?

在应用列表页面，可以按以下条件筛选：
- 应用名称
- 创建日期
- 审核状态（待审?已通过/已拒绝）

### 应用设置

点击应用卡片进入应用详情页，可以?
- 查看应用 ID（用于客户端集成?
- 上传应用图标
- 配置签名文件（JKS/BKS?
- 配置加密密钥
- 启用/停用应用
- 删除应用

### 应用状?

- **活跃**：正常使?
- **停用**：暂停使用，客户端无法检查更?

## 补丁管理

### 上传补丁

1. 进入应用详情?
2. 点击"上传补丁"按钮
3. 填写补丁信息?
   - **补丁文件**：选择 .zip 格式的补丁文?
   - **版本?*：新版本号（?1.0.1?
   - **基础版本**：基于哪个版本生成的补丁（如 1.0.0?
   - **更新说明**：补丁内容描?
   - **强制更新**：是否强制用户更?
   - **灰度比例**：推送给多少比例的用户（0-100%?
4. 点击"上传"

### 补丁列表

在补丁管理页面可以：
- 查看所有补?
- 按应用筛?
- 查看补丁状?
- 查看下载次数

### 补丁状?

- **测试?*：仅供测试，不对外发?
- **已发?*：正常发布，用户可以下载
- **已停?*：停止发布，用户无法下载

### 编辑补丁

点击补丁操作菜单，选择"编辑"?
- 修改更新说明
- 调整灰度比例
- 修改强制更新标记
- 更改补丁状?

### 删除补丁

点击补丁操作菜单，选择"删除"?
- 删除后无法恢?
- 会同时删除服务器上的补丁文件

### 批量操作

在补丁管理页面：
1. 勾选多个补?
2. 点击"批量操作"下拉菜单
3. 选择操作?
   - 批量启用
   - 批量停用
   - 批量删除

## 灰度发布

### 什么是灰度发布

灰度发布允许你只向部分用户推送补丁，逐步扩大推送范围，降低风险?

### 设置灰度比例

1. 上传补丁时设?灰度比例"?-100%?
2. 或编辑已有补丁，修改灰度比例

### 灰度策略

系统使用设备 ID 哈希算法，确保：
- 同一设备每次检查更新的结果一?
- 灰度比例均匀分布
- 可以随时调整比例

### 灰度发布流程

1. **初始发布**：设置灰度比例为 10%
2. **观察数据**：查看下载成功率和错误日?
3. **逐步扩大**：如果没问题，调整为 50%
4. **全量发布**：确认稳定后，调整为 100%

## 统计分析

### 仪表?

登录后默认显示仪表板，包含：
- **统计卡片**：应用总数、补丁总数、今日下载、成功率
- **下载趋势**?/30/90 天趋势图
- **最近活?*：最新的操作日志
- **热门应用**：下载量 Top 5
- **最新补?*：最近上传的补丁
- **快捷操作**：常用功能入?

### 统计分析页面

点击"统计分析"菜单，查看详细数据：
- **概览数据**：总体统计
- **下载趋势**：时间序列图?
- **版本分布**：饼图展示各版本占比
- **设备分布**：柱状图展示设备型号分布
- **最新补?*：补丁列?

### 导出数据

在统计页面可以导出：
- 下载记录（CSV?
- 统计报表（Excel?

## 用户管理

### 查看用户列表（管理员?

点击"用户管理"菜单，查看所有用户：
- 用户?
- 邮箱
- 角色（管理员/普通用户）
- 注册时间
- 状态（正常/已封禁）

### 创建用户（管理员?

1. 点击"创建用户"按钮
2. 填写用户信息?
   - 用户?
   - 密码
   - 邮箱
   - 角色
3. 点击"创建"

### 封禁用户（管理员?

1. 在用户列表中找到目标用户
2. 点击操作菜单，选择"封禁用户"
3. 确认操作

**效果**?
- 用户无法登录
- 用户的应用被停用
- 客户端无法检查更?

### 解封用户（管理员?

1. 在用户列表中找到已封禁用?
2. 点击操作菜单，选择"解封用户"
3. 确认操作

### 删除用户（管理员?

1. 在用户列表中找到目标用户
2. 点击操作菜单，选择"删除用户"
3. 确认操作

**注意**：删除用户会同时删除其所有应用和补丁?

## 系统设置

### 定时任务

?系统管理 -> 定时任务"中管理自动任务：

#### 数据备份
- **执行时间**：每天凌?2 ?
- **功能**：自动备份数据库和文?
- **操作**：启?停止

#### 日志清理
- **执行时间**：每周日凌晨 3 ?
- **功能**：清?30 天前的操作日?
- **操作**：启?停止

#### 记录清理
- **执行时间**：每?1 号凌?4 ?
- **功能**：清?90 天前的下载记?
- **操作**：启?停止

### 备份管理

?系统管理 -> 备份管理"中：

#### 立即备份
1. 点击"立即备份"按钮
2. 等待备份完成
3. 备份文件保存?`backend/backups` 目录

#### 恢复备份
1. 在备份列表中找到目标备份
2. 点击"恢复"按钮
3. 确认操作
4. 系统会自动重?

#### 删除备份
1. 在备份列表中找到目标备份
2. 点击"删除"按钮
3. 确认操作

### 数据清理

?系统管理 -> 数据清理"中：

#### 清理日志
- 删除 30 天前的操作日?
- 释放数据库空?

#### 清理下载记录
- 删除 90 天前的下载记?
- 释放数据库空?

### 审核设置

?系统管理 -> 审核设置"中：

#### 启用应用审核
- 开启后，普通用户创建的应用需要管理员审核
- 管理员创建的应用可以设置为自动通过

#### 管理员自动通过
- 开启后，管理员创建的应用自动审核通过
- 关闭后，管理员创建的应用也需要审?

### 应用审核

?系统管理 -> 应用审核"中：

#### 审核应用
1. 查看待审核应用列?
2. 点击"审核"按钮
3. 选择"通过"?拒绝"
4. 填写审核意见（可选）
5. 确认操作

## 通知系统

### 查看通知

点击右上角铃铛图标，查看通知?
- 应用审核通知
- 补丁更新通知
- 系统公告

### 通知管理

- **标记已读**：点击通知即可标记为已?
- **删除通知**：点击通知右侧的删除按?
- **清空通知**：点?清空已读"按钮

### 通知类型

- **应用创建**：应用创建成?
- **应用审核**：应用审核结?
- **补丁上传**：补丁上传成?
- **系统公告**：系统重要通知

## 全局搜索

### 使用搜索

1. 点击顶部搜索?
2. 输入关键?
3. 按回车或点击搜索按钮

### 搜索范围

- **应用**：搜索应用名称、包名、应?ID
- **补丁**：搜索版本号、描?
- **用户**：搜索用户名、邮箱（仅管理员?

### 搜索结果

- 关键词高亮显?
- 按类型分标签页展?
- 点击结果跳转到详情页

## 操作日志

### 查看日志

点击"操作日志"菜单，查看所有操作记录：
- 操作用户
- 操作类型
- 操作对象
- 操作时间
- IP 地址

### 日志筛?

可以按以下条件筛选：
- 操作类型（创?更新/删除等）
- 用户?
- 时间范围

### 日志导出

点击"导出"按钮，导出日志为 CSV 文件?

## 客户端集成示?

### Android 客户?

```java
// 检查更?
String url = "http://your-domain.com/api/client/check-update";
url += "?appId=your-app-id";
url += "&version=" + BuildConfig.VERSION_NAME;
url += "&deviceId=" + getDeviceId();

// 发送请?
// 解析响应
// 下载补丁
// 应用补丁
// 上报结果
```

### API 使用示例

详见 README.md ?客户端集?章节?

## 最佳实?

### 补丁管理
1. 使用语义化版本号（如 1.0.0?
2. 详细填写更新说明
3. 先小范围灰度，再全量发布
4. 定期清理旧版本补?

### 安全管理
1. 定期修改密码
2. 启用补丁签名验证
3. 使用 HTTPS 传输
4. 定期备份数据

### 性能优化
1. 使用 CDN 加速下?
2. 定期清理日志和记?
3. 监控服务器资源使?
4. 优化数据库查?

## 故障处理

遇到问题时：
1. 查看操作日志
2. 检查浏览器控制?
3. 查看服务器日?
4. 参?FAQ 文档
5. 提交 GitHub Issue

---

**提示**：本文档持续更新中，如有疑问请查?FAQ 或联系技术支持?

